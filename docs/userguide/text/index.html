
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Text analysis Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../evaluation/" />
    
    
    <link rel="prev" href="../supervised-learning/export-coreml.html" />
    

    <script src="../turi/js/jquery/jquery-2.1.3.min.js"></script>
    <script src="../turi/js/d3/d3.min.js"></script>
    <script src="../supervised-learning/images/random-utils.js"></script>
    <script src="../supervised-learning/images/plotting-utils.js"></script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../sframe/">
            
                <a href="../sframe/">
            
                    
                    Working with data
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../sframe/tabular-data.html">
            
                <a href="../sframe/tabular-data.html">
            
                    
                    Tabular data
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../sframe/sframe-intro.html">
            
                <a href="../sframe/sframe-intro.html">
            
                    
                    Loading and Saving
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../sframe/data-manipulation.html">
            
                <a href="../sframe/data-manipulation.html">
            
                    
                    Data Manipulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../data_formats_and_sources/sql_integration.html">
            
                <a href="../data_formats_and_sources/sql_integration.html">
            
                    
                    SQL Databases
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../sgraph/sgraph.html">
            
                <a href="../sgraph/sgraph.html">
            
                    
                    Graph data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="analysis.html">
            
                <a href="analysis.html">
            
                    
                    Text data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../vis/">
            
                <a href="../vis/">
            
                    
                    Visualization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../vis/gallery.html">
            
                <a href="../vis/gallery.html">
            
                    
                    Example Gallery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../vis/use_cases.html">
            
                <a href="../vis/use_cases.html">
            
                    
                    Sample Use Cases
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../applications/">
            
                <a href="../applications/">
            
                    
                    Task focused toolkits
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../recommender/">
            
                <a href="../recommender/">
            
                    
                    Recommender Systems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../recommender/using-trained-models.html">
            
                <a href="../recommender/using-trained-models.html">
            
                    
                    Using models
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../recommender/choosing-a-model.html">
            
                <a href="../recommender/choosing-a-model.html">
            
                    
                    Choosing a model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../recommender/coreml-deployment.html">
            
                <a href="../recommender/coreml-deployment.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../image_classifier/">
            
                <a href="../image_classifier/">
            
                    
                    Image Classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../image_classifier/advanced-usage.html">
            
                <a href="../image_classifier/advanced-usage.html">
            
                    
                    Advanced Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../image_classifier/how-it-works.html">
            
                <a href="../image_classifier/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../image_classifier/export-coreml.html">
            
                <a href="../image_classifier/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../drawing_classifier/">
            
                <a href="../drawing_classifier/">
            
                    
                    Drawing Classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../drawing_classifier/how-it-works.html">
            
                <a href="../drawing_classifier/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../drawing_classifier/data-preparation.html">
            
                <a href="../drawing_classifier/data-preparation.html">
            
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../drawing_classifier/export-coreml.html">
            
                <a href="../drawing_classifier/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="../drawing_classifier/advanced-usage.html">
            
                <a href="../drawing_classifier/advanced-usage.html">
            
                    
                    Advanced Usage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../sound_classifier/">
            
                <a href="../sound_classifier/">
            
                    
                    Sound Classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../sound_classifier/how-it-works.html">
            
                <a href="../sound_classifier/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.2" data-path="../sound_classifier/advanced-usage.html">
            
                <a href="../sound_classifier/advanced-usage.html">
            
                    
                    Advanced Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.3" data-path="../sound_classifier/export-coreml.html">
            
                <a href="../sound_classifier/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../image_similarity/">
            
                <a href="../image_similarity/">
            
                    
                    Image Similarity
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../image_similarity/export-coreml.html">
            
                <a href="../image_similarity/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../object_detection/">
            
                <a href="../object_detection/">
            
                    
                    Object Detection
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.1" data-path="../object_detection/data-preparation.html">
            
                <a href="../object_detection/data-preparation.html">
            
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.2" data-path="../object_detection/advanced-usage.html">
            
                <a href="../object_detection/advanced-usage.html">
            
                    
                    Advanced Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.3" data-path="../object_detection/export-coreml.html">
            
                <a href="../object_detection/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.4" data-path="../object_detection/how-it-works.html">
            
                <a href="../object_detection/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../one_shot_object_detection/">
            
                <a href="../one_shot_object_detection/">
            
                    
                    One-Shot Object Detection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../style_transfer/">
            
                <a href="../style_transfer/">
            
                    
                    Style Transfer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.8.1" data-path="../style_transfer/how-it-works.html">
            
                <a href="../style_transfer/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8.2" data-path="../style_transfer/export-coreml.html">
            
                <a href="../style_transfer/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../activity_classifier/">
            
                <a href="../activity_classifier/">
            
                    
                    Activity Classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.9.1" data-path="../activity_classifier/data-preparation.html">
            
                <a href="../activity_classifier/data-preparation.html">
            
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9.2" data-path="../activity_classifier/advanced-usage.html">
            
                <a href="../activity_classifier/advanced-usage.html">
            
                    
                    Advanced Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9.3" data-path="../activity_classifier/export_coreml.html">
            
                <a href="../activity_classifier/export_coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9.4" data-path="../activity_classifier/how-it-works.html">
            
                <a href="../activity_classifier/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="../text_classifier/">
            
                <a href="../text_classifier/">
            
                    
                    Text Classifier
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../modeling-data/">
            
                <a href="../modeling-data/">
            
                    
                    Machine learning essentials
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../supervised-learning/classifier.html">
            
                <a href="../supervised-learning/classifier.html">
            
                    
                    Classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../supervised-learning/boosted_trees_classifier.html">
            
                <a href="../supervised-learning/boosted_trees_classifier.html">
            
                    
                    Boosted Trees Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../supervised-learning/decision_tree_classifier.html">
            
                <a href="../supervised-learning/decision_tree_classifier.html">
            
                    
                    Decision Tree Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../supervised-learning/logistic-regression.html">
            
                <a href="../supervised-learning/logistic-regression.html">
            
                    
                    Logistic Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.4" data-path="../supervised-learning/knn_classifier.html">
            
                <a href="../supervised-learning/knn_classifier.html">
            
                    
                    Nearest Neighbor Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.5" data-path="../supervised-learning/random_forest_classifier.html">
            
                <a href="../supervised-learning/random_forest_classifier.html">
            
                    
                    Random Forest Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.6" data-path="../supervised-learning/svm.html">
            
                <a href="../supervised-learning/svm.html">
            
                    
                    SVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.7" data-path="../supervised-learning/export-coreml.html">
            
                <a href="../supervised-learning/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../clustering/">
            
                <a href="../clustering/">
            
                    
                    Clustering
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../clustering/kmeans.html">
            
                <a href="../clustering/kmeans.html">
            
                    
                    KMeans
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../clustering/dbscan.html">
            
                <a href="../clustering/dbscan.html">
            
                    
                    DBSCAN
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../graph_analytics/">
            
                <a href="../graph_analytics/">
            
                    
                    Graph analytics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../nearest_neighbors/nearest_neighbors.html">
            
                <a href="../nearest_neighbors/nearest_neighbors.html">
            
                    
                    Nearest neighbors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../supervised-learning/regression.html">
            
                <a href="../supervised-learning/regression.html">
            
                    
                    Regression
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.1" data-path="../supervised-learning/boosted_trees_regression.html">
            
                <a href="../supervised-learning/boosted_trees_regression.html">
            
                    
                    Boosted Trees Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.2" data-path="../supervised-learning/decision_tree_regression.html">
            
                <a href="../supervised-learning/decision_tree_regression.html">
            
                    
                    Decision Tree Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.3" data-path="../supervised-learning/linear-regression.html">
            
                <a href="../supervised-learning/linear-regression.html">
            
                    
                    Linear Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.4" data-path="../supervised-learning/random_forest_regression.html">
            
                <a href="../supervised-learning/random_forest_regression.html">
            
                    
                    Random Forest Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.5" data-path="../supervised-learning/export-coreml.html">
            
                <a href="../supervised-learning/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.4.6" data-path="./">
            
                <a href="./">
            
                    
                    Text analysis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../evaluation/">
            
                <a href="../evaluation/">
            
                    
                    Evaluating models
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../evaluation/regression.html">
            
                <a href="../evaluation/regression.html">
            
                    
                    Regression metrics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../evaluation/classification.html">
            
                <a href="../evaluation/classification.html">
            
                    
                    Classification metrics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../conclusion.html">
            
                <a href="../conclusion.html">
            
                    
                    Additional Resources
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../cpp.html">
            
                <a href="../cpp.html">
            
                    
                    C++ API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../datasets.html">
            
                <a href="../datasets.html">
            
                    
                    Dataset Disclaimer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Text analysis</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="text-analysis"><a name="text-analysis" class="plugin-anchor" href="#text-analysis"><i class="fa fa-link" aria-hidden="true"></i></a>Text analysis</h1><p>Turi Create. Applications for automated text analytics include:
In this chapter we will show how to do standard text analytics using</p><ul><li>detecting user sentiment regarding product reviews
</li>
<li>creating features for use in other machine learning models
</li>
<li>understanding large collections of documents
</li></ul>
<h1 id="topic-models"><a name="topic-models" class="plugin-anchor" href="#topic-models"><i class="fa fa-link" aria-hidden="true"></i></a>Topic Models</h1><p>&quot;Topic models&quot; are a class of statistical models for text data. These
models typically assume documents can be described by a small set of
topics, and there is a probability of any word occurring for a given
&quot;topic&quot;.</p><p>For example, suppose we are given the documents shown below, where the
first document begins with the text &quot;The burrito was terrible. I...&quot; and
continues with a long description of the eater&apos;s woes. A topic model
attempts to do two things:</p><ul><li>Learn &quot;topics&quot;: collections of words that co-occur in a meaningful way
(as shown by the colored word clouds).
</li>
<li>Learn how much each document pertains to each topic. This is
represented by the colored circles, where larger circles indicate
larger probabilities.
</li></ul>
<p><img alt="topic_model" src="images/topic_model.png"></p><p>There are many variations of topic models that incorporate other sources
of data, and there are a variety of algorithms for learning the
parameters of the model from data. This section focuses on creating and
using topic models with Turi Create.</p><h5 id="creating-a-model"><a name="creating-a-model" class="plugin-anchor" href="#creating-a-model"><i class="fa fa-link" aria-hidden="true"></i></a>Creating a model</h5><p>The following example includes the  SArray of documents that we created
in previous sections: Each element represents a document in &quot;bag of
words&quot; representation -- a dictionary with word keys and whose values
are the number of times that word occurred in the document. Once in this
form, it is straightforward to learn a topic model.</p><pre><code class="lang-python"><span class="hljs-keyword">import</span> turicreate <span class="hljs-keyword">as</span> tc

docs = tc.SFrame(<span class="hljs-string">&apos;wikipedia_data&apos;</span>)

<span class="hljs-comment"># Remove stop words and convert to bag of words</span>
docs = tc.text_analytics.count_words(docs[<span class="hljs-string">&apos;X1&apos;</span>])
docs = docs.dict_trim_by_keys(tc.text_analytics.stop_words(), exclude=<span class="hljs-keyword">True</span>)

<span class="hljs-comment"># Learn topic model</span>
model = tc.topic_model.create(docs)</code></pre>
<p>There are a variety of additional arguments available which are covered in the <a href="https://apple.github.io/turicreate/docs/api/generated/turicreate.topic_model.create.html" target="_blank">API
 Reference</a>.</p><p>The two most commonly used arguments are:</p><ul><li><code>num_topics</code>: Changes the number of topics to learn.
</li>
<li><code>num_iterations</code>: Changes how many iterations to perform.
</li></ul>
<p>The returned object is a TopicModel object, which exposes several useful
methods. For example,
<a href="https://apple.github.io/turicreate/docs/api/generated/turicreate.topic_model.TopicModel.get_topics.html" target="_blank">turicreate.topic_model.TopicModel.get_topics()</a>
returns an SFrame containing the most probable words for each topic and
a score related to how high that word ranks for that topic.</p><p>You may get details on a subset of topics by supplying a list of topic
names or topic indices, as well as restrict the number of words returned
per topic.</p><pre><code class="lang-python">print(model.get_topics())</code></pre>
<pre><code class="lang-no-highlight">+-------+--------+------------------+
| topic |  word  |      score       |
+-------+--------+------------------+
|   0   | state  | 0.00781031634036 |
|   0   |  team  | 0.0116096428466  |
|   0   | league | 0.00734010266384 |
|   0   | world  | 0.00707611127116 |
|   0   | party  | 0.00693101676527 |
|   1   |  area  | 0.00939951828831 |
|   1   |  film  | 0.00903846641308 |
|   1   | album  | 0.00810524480636 |
|   1   | states | 0.00592481420794 |
|   1   |  part  | 0.00591876305919 |
+-------+--------+------------------+
[50 rows x 3 columns]</code></pre>
<p>If we just want to see the top words per topic, this code snippet will
rearrange the above SFrame to do that.</p><pre><code class="lang-python">print(model.get_topics(output_type=<span class="hljs-string">&apos;topic_words&apos;</span>))</code></pre>
<pre><code class="lang-no-highlight">+-------------------------------+
|             words             |
+-------------------------------+
| [team, state, league, worl... |
| [area, film, album, states... |
| [city, family, war, built,... |
| [united, american, state, ... |
| [school, year, high, stati... |
| [season, music, church, ye... |
| [de, century, part, includ... |
| [university, 2006, line, s... |
| [age, population, people, ... |
| [time, series, work, life,... |
+-------------------------------+</code></pre>
<p>The model object keeps track of various useful statistics about how the
model was trained and its current status.</p><pre><code class="lang-no-higlight">Topic Model
    Data:
        Vocabulary size:     632779
    Settings:
        Number of topics:    10
        alpha:               5.0
        beta:                0.1
        Iterations:          10
        Training time:       7.2635
        Verbose:             False
    Accessible fields:
        m[&apos;topics&apos;]          An SFrame containing the topics.
        m[&apos;vocabulary&apos;]      An SArray containing the topics.
    Useful methods:
        m.get_topics()       Get the most probable words per topic.
        m.predict(new_docs)  Make predictions for new documents.
</code></pre>
<p>To predict the topic of a given document, one can get an SArray of
integers containing the most probable topic ids:</p><pre><code class="lang-python">pred = model.predict(docs)</code></pre>
<p>Combining the above method with standard SFrame capabilities, one can
use predict to find documents related to a particular topic</p><pre><code class="lang-python">docs_in_topic_0 = docs[model.predict(docs) == <span class="hljs-number">0</span>]</code></pre>
<p>or join with other data in order to analyze an author&apos;s typical topics
or how topics change over time. For example, if we had author and
timestamp data, we could do the following:</p><pre><code class="lang-python">m = topic_model.create(doc_data[<span class="hljs-string">&apos;text&apos;</span>])
doc_data[<span class="hljs-string">&apos;topic&apos;</span>] = m.predict(doc_data[<span class="hljs-string">&apos;text&apos;</span>])
doc_data[<span class="hljs-string">&apos;author&apos;</span>][doc_data[<span class="hljs-string">&apos;topic&apos;</span>] == <span class="hljs-number">1</span>] <span class="hljs-comment"># authors of docs in topic 1</span></code></pre>
<p>Sometimes you want to know how certain the model&apos;s predictions are. One
can optionally also get the probability of each topic for a set of
documents. Each element of the returned SArray is a vector containing
the probability of each document.</p><pre><code class="lang-python">pred = model.predict(docs, output_type=<span class="hljs-string">&apos;probability&apos;</span>)</code></pre>
<pre><code class="lang-no-highlight">array(&apos;d&apos;, [0.049204587495375506, 0.14502404735479096,
0.028116907140214576, 0.1709211986681465, 0.1220865704772475,
0.15945246022937476, 0.08213096559378469, 0.017388087310395855,
0.219385867554569, 0.006289308176100629])</code></pre>
<h5 id="working-with-topicmodel-objects"><a name="working-with-topicmodel-objects" class="plugin-anchor" href="#working-with-topicmodel-objects"><i class="fa fa-link" aria-hidden="true"></i></a>Working with TopicModel objects</h5><p>The value for each metadata field listed in <code>m.get_fields()</code> is
accessible via <code>m[field]</code>.</p><p>A topic model will learn parameters for every word that is present in
the corpus. The &quot;vocabulary&quot; stored by the model will return this list
of words.</p><pre><code class="lang-python">model[<span class="hljs-string">&apos;vocabulary&apos;</span>]</code></pre>
<pre><code class="lang-no-highlight">dtype: str
Rows: 632779
[&apos;definitional&apos;, &apos;diversity&apos;, &apos;countereconomics&apos;, &apos;level&apos;, &apos;simultaneously&apos;, &apos;process&apos;, &apos;technology&apos;, &apos;phenomena&apos;, &apos;attitudes&apos;, &apos;consumer&apos;, &apos;creation&apos;, &apos;selfdetermined&apos;, &apos;ivan&apos;, &apos;popularized&apos;, &apos;se&apos;, &apos;questioned&apos;, &apos;organizing&apos;, &apos;addition&apos;, &apos;germany&apos;, &apos;experiments&apos;, &apos;activity&apos;, &apos;childled&apos;, &apos;series&apos;, &apos;inspiration&apos;, &apos;moderna&apos;, &apos;field&apos;, &apos;country&apos;, &apos;projects&apos;, &apos;pedagogical&apos;, &apos;murray&apos;, &apos;anticlerical&apos;, &apos;fiercely&apos;, &apos;noncoercive&apos;, &apos;rational&apos;, &apos;widely&apos;, &apos;church&apos;, &apos;defiance&apos;, &apos;progressive&apos;, &apos;ferrer&apos;, &apos;freethinker&apos;, &apos;fragments&apos;, &apos;linvention&apos;, &apos;solaire&apos;, &apos;amoureux&apos;, &apos;du&apos;, &apos;onfray&apos;, &apos;joy&apos;, &apos;writing&apos;, &apos;recently&apos;, &apos;proponent&apos;, &apos;consenting&apos;, &apos;camaraderie&apos;, &apos;la&apos;, &apos;emile&apos;, &apos;teufel&apos;, &apos;beginning&apos;, &apos;homosexuality&apos;, &apos;spoke&apos;, &apos;18491898&apos;, &apos;reitzel&apos;, &apos;fact&apos;, &apos;boldly&apos;, &apos;campaigned&apos;, &apos;noted&apos;, &apos;frequented&apos;, &apos;villagers&apos;, &apos;discussion&apos;, &apos;margaret&apos;, &apos;lesbian&apos;, &apos;millay&apos;, &apos;edna&apos;, &apos;bisexual&apos;, &apos;sexuality&apos;, &apos;encouraged&apos;, &apos;greenwich&apos;, &apos;lazarus&apos;, &apos;une&apos;, &apos;staunchly&apos;, &apos;18721890&apos;, &apos;angela&apos;, &apos;heywood&apos;, &apos;existed&apos;, &apos;discriminated&apos;, &apos;womens&apos;, &apos;sexual&apos;, &apos;viewed&apos;, &apos;pleasure&apos;, &apos;experimental&apos;, &apos;love&apos;, &apos;proven&apos;, &apos;disputes&apos;, &apos;internal&apos;, &apos;overlapping&apos;, &apos;cryptography&apos;, &apos;intersecting&apos;, &apos;bonanno&apos;, &apos;alfredo&apos;, &apos;formal&apos;, &apos;critical&apos;, &apos;recent&apos;, ... ]</code></pre>
<p>Similarly, we can obtain the current parameters for each word by
requesting the &quot;topics&quot; stored by the model. Each element of the
&quot;topic_probabilities&quot; column contains an array with length
<code>num_topics</code> where element $k$ is the probability of that word under
topic $k$.</p><pre><code class="lang-python">model[<span class="hljs-string">&apos;topics&apos;</span>]</code></pre>
<pre><code class="lang-no-highlight">Columns:
        topic_probabilities     array
        vocabulary      str

Rows: 632779

Data:
+-------------------------------+------------------+
|      topic_probabilities      |    vocabulary    |
+-------------------------------+------------------+
| [8.49255529868e-08, 8.6181... |   definitional   |
| [8.49255529868e-08, 7.8347... |    diversity     |
| [8.49255529868e-08, 7.8347... | countereconomics |
| [8.49255529868e-08, 7.8347... |      level       |
| [8.49255529868e-08, 7.8347... |  simultaneously  |
| [8.49255529868e-08, 7.8347... |     process      |
| [8.49255529868e-08, 7.8347... |    technology    |
| [8.49255529868e-08, 2.4287... |    phenomena     |
| [2.13163137997e-05, 0.0001... |    attitudes     |
| [8.49255529868e-08, 2.8283... |     consumer     |
+-------------------------------+------------------+</code></pre>
<p>As with other models in Turi Create, it&apos;s also easy to save and load
models.</p><pre><code class="lang-python">model.save(<span class="hljs-string">&apos;my_model.model&apos;</span>)
new_model = tc.load_model(<span class="hljs-string">&apos;my_model.model&apos;</span>)</code></pre>
<h5 id="importing-from-other-formats"><a name="importing-from-other-formats" class="plugin-anchor" href="#importing-from-other-formats"><i class="fa fa-link" aria-hidden="true"></i></a>Importing from other formats</h5><p>In some cases your data may be in a format that some refer to as
&quot;docword&quot;, where each row in the text file contains a document id, a
word id, and the number of times that word occurs in that document. For
this situation, check out the <code>parse_docword</code> utility:</p><pre><code>docs = tc.text_analytics.parse_docword(doc_word_file, vocab_file)</code></pre>
<h5 id="initializing-from-other-models"><a name="initializing-from-other-models" class="plugin-anchor" href="#initializing-from-other-models"><i class="fa fa-link" aria-hidden="true"></i></a>Initializing from other models</h5><p>It is also easy to create a new topic model from an old one &#x2013; whether it
was created using Turi Create or another package.</p><pre><code class="lang-python">new_model = tc.topic_model.create(docs,
                                        num_topics=m[<span class="hljs-string">&apos;num_topics&apos;</span>],
                                        initial_topics=m[<span class="hljs-string">&apos;topics&apos;</span>])</code></pre>
<h5 id="seeding-the-model-with-prior-knowledge"><a name="seeding-the-model-with-prior-knowledge" class="plugin-anchor" href="#seeding-the-model-with-prior-knowledge"><i class="fa fa-link" aria-hidden="true"></i></a>Seeding the model with prior knowledge</h5><p>To manually fix several words to always be assigned to a topic, use the
associations argument. This can be useful for experimentation purposes.
For example, the following will ensure that &quot;season&quot; and &quot;club&quot; will
have a high probability under topic 1 and &quot;2008&quot; and &quot;2009&quot; will have a
high probability under topic 2:</p><pre><code class="lang-python">associations = tc.SFrame({<span class="hljs-string">&apos;word&apos;</span>:[<span class="hljs-string">&apos;season&apos;</span>, <span class="hljs-string">&apos;club&apos;</span>, <span class="hljs-string">&apos;2008&apos;</span>, <span class="hljs-string">&apos;2009&apos;</span>],
                                <span class="hljs-string">&apos;topic&apos;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>]})</code></pre>
<p>If we fit a topic model using this option, we indeed find that &quot;season&quot;
and &quot;club&quot; are present in topic 1, and we find other related words in
the same topic.</p><pre><code class="lang-python">m2 = tc.topic_model.create(docs,
                           num_topics=<span class="hljs-number">20</span>,
                           num_iterations=<span class="hljs-number">50</span>,
                           associations=associations,
                           verbose=<span class="hljs-keyword">False</span>)

topics = m2.get_topics(num_words=<span class="hljs-number">10</span>, output_type=<span class="hljs-string">&apos;topic_words&apos;</span>)[<span class="hljs-string">&apos;words&apos;</span>][<span class="hljs-number">1</span>]</code></pre>
<pre><code class="lang-no-highlight">[&apos;season&apos;,
 &apos;club&apos;,
 &apos;league&apos;,
 &apos;played&apos;,
 &apos;won&apos;,
 &apos;football&apos;,
 &apos;world&apos;,
 &apos;cup&apos;,
 &apos;year&apos;,
 &apos;championship&apos;]</code></pre>
<pre><code class="lang-python">m2.get_topics(num_words=<span class="hljs-number">10</span>, output_type=<span class="hljs-string">&apos;topic_words&apos;</span>)[<span class="hljs-string">&apos;words&apos;</span>][<span class="hljs-number">2</span>]</code></pre>
<pre><code class="lang-no-highlight">[&apos;team&apos;,
 &apos;2008&apos;,
 &apos;game&apos;,
 &apos;2009&apos;,
 &apos;2007&apos;,
 &apos;2010&apos;,
 &apos;final&apos;,
 &apos;player&apos;,
 &apos;1&apos;,
 &apos;players&apos;]</code></pre>
<h5 id="evaluating-topic-models"><a name="evaluating-topic-models" class="plugin-anchor" href="#evaluating-topic-models"><i class="fa fa-link" aria-hidden="true"></i></a>Evaluating topic models</h5><p>A common quantitative way to evaluate topic models is to split each
document into a training set and a test set, learn a topic model on the
training portion of each document, and compute the probability of the
held out word counts under the model. A slight variation of this
probability is called &quot;perplexity&quot;. Lower values are better. Estimates
of this quantity are provided during training. See
<a href="https://apple.github.io/turicreate/docs/api/generated/turicreate.text_analytics.random_split.html" target="_blank">turicreate.text_analytics.random_split</a>,
<a href="https://apple.github.io/turicreate/docs/api/generated/turicreate.topic_model.perplexity.html" target="_blank">turicreate.topic_model.perplexity</a>,
<a href="https://apple.github.io/turicreate/docs/api/generated/turicreate.topic_model.TopicModel.evaluate.html" target="_blank">TopicModel.evaluate</a>
for helper functions to do this sort of evaluation on trained models.</p><p>A common way to qualitatively evaluate topic models is to examine the
most probable words in each topic and count the number of words that do
not fit with the rest. If there are topics with words that do not
co-occur in your corpus, you may want to try:</p><ul><li>removing stop words and other words that are not interesting to your analysis
</li>
<li>changing the number of topics
</li>
<li>increasing the number of iterations
</li></ul>
<p>To learn more check out the <a href="https://apple.github.io/turicreate/docs/api/generated/turicreate.topic_model.create.html" target="_blank">API
Reference</a>.</p>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../supervised-learning/export-coreml.html" class="navigation navigation-prev " aria-label="Previous page: Deployment to Core ML">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../evaluation/" class="navigation navigation-next " aria-label="Next page: Evaluating models">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Text analysis","level":"1.4.6","depth":2,"next":{"title":"Evaluating models","level":"1.5","depth":1,"path":"evaluation/README.md","ref":"evaluation/README.md","articles":[{"title":"Regression metrics","level":"1.5.1","depth":2,"path":"evaluation/regression.md","ref":"evaluation/regression.md","articles":[]},{"title":"Classification metrics","level":"1.5.2","depth":2,"path":"evaluation/classification.md","ref":"evaluation/classification.md","articles":[]}]},"previous":{"title":"Deployment to Core ML","level":"1.4.5.5","depth":3,"path":"supervised-learning/export-coreml.md","ref":"supervised-learning/export-coreml.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"3.2.0","theme":"default","variables":{},"plugins":["collapsible-menu@1.0.2","anchors@0.5.0","mathjax"],"pluginsConfig":{"collapsible-menu":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"fontSettings":{"theme":"white","family":"sans","size":2},"highlight":{},"mathjax":{"forceSVG":false,"version":"2.6-latest"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"text/README.md","mtime":"2020-05-01T16:47:49.139Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2020-05-21T01:09:56.706Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="https://cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

