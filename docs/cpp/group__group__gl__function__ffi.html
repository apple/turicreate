<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Turi Create: Function Extension Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Turi Create
   &#160;<span id="projectnumber">4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__gl__function__ffi.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Function Extension Interface</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga2d8058d55689f2f68a1bfd3c6266cebf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a></td></tr>
<tr class="separator:ga2d8058d55689f2f68a1bfd3c6266cebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd6f96997a5f904c3d9aa9204417aaf0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(function, ...)</td></tr>
<tr class="separator:gafd6f96997a5f904c3d9aa9204417aaf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafdaa7f30a7425a7b6a904efe782a0cb6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__gl__function__ffi.html#gafdaa7f30a7425a7b6a904efe782a0cb6">REGISTER_NAMED_FUNCTION</a>(name,  function, ...)</td></tr>
<tr class="separator:gafdaa7f30a7425a7b6a904efe782a0cb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf476a39341a191c739319ecca72919db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__gl__function__ffi.html#gaf476a39341a191c739319ecca72919db">REGISTER_DOCSTRING</a>(function,  docstring)</td></tr>
<tr class="separator:gaf476a39341a191c739319ecca72919db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga24327cae92937381554e92becdbcff32"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a></td></tr>
<tr class="separator:ga24327cae92937381554e92becdbcff32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The Function Extension Interface provides a collection of macros that automate the process of exporting a function to Python. The macros are located in sdk/toolkit_function_macros.hpp .</p>
<p>For detailed usage descriptions, see page_turicreate_extension_interface .</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;model_server/lib/toolkit_function_macros.hpp&gt;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceturi.html">turi</a>;</div><div class="line"></div><div class="line">std::string demo_to_string(<span class="keywordtype">int</span> in) {</div><div class="line">  <span class="keywordflow">return</span> std::to_string(in);</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a></div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(demo_to_string, <span class="stringliteral">&quot;in&quot;</span>);</div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a></div></div><!-- fragment --> <h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga2d8058d55689f2f68a1bfd3c6266cebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d8058d55689f2f68a1bfd3c6266cebf">&#9670;&nbsp;</a></span>BEGIN_FUNCTION_REGISTRATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BEGIN_FUNCTION_REGISTRATION</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">__attribute__((visibility(<span class="stringliteral">&quot;default&quot;</span>)))                  \</div><div class="line">      std::vector&lt;::turi::toolkit_function_specification&gt; \</div><div class="line">      get_toolkit_function_registration() {               \</div><div class="line">     std::vector&lt;::turi::toolkit_function_specification&gt; specs;</div></div><!-- fragment --><p>Begins a toolkit registration block.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a> </dd>
<dd>
<a class="el" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a></dd></dl>
<p>The basic usage is: </p><div class="fragment"><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a></div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(my_function, inargname1, inargname2 ...)</div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(my_function2, inargname1, ...)</div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a></div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="toolkit__function__macros_8hpp_source.html#l00061">61</a> of file <a class="el" href="toolkit__function__macros_8hpp_source.html">toolkit_function_macros.hpp</a>.</p>

</div>
</div>
<a id="ga24327cae92937381554e92becdbcff32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga24327cae92937381554e92becdbcff32">&#9670;&nbsp;</a></span>END_FUNCTION_REGISTRATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define END_FUNCTION_REGISTRATION</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">return</span> specs; \</div><div class="line">   }</div></div><!-- fragment --><p>Ends a toolkit registration block.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a>. </dd>
<dd>
REGISTER_FUNCTION_FUNCTION</dd></dl>
<p>The basic usage is: </p><div class="fragment"><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a></div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(my_function, inargname1, inargname2 ...)</div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(my_function2, inargname1, ...)</div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a></div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="toolkit__function__macros_8hpp_source.html#l00173">173</a> of file <a class="el" href="toolkit__function__macros_8hpp_source.html">toolkit_function_macros.hpp</a>.</p>

</div>
</div>
<a id="gaf476a39341a191c739319ecca72919db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf476a39341a191c739319ecca72919db">&#9670;&nbsp;</a></span>REGISTER_DOCSTRING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REGISTER_DOCSTRING</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">function, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">docstring&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; i: specs) { \</div><div class="line">    if (i.description.count(<span class="stringliteral">&quot;_raw_fn_pointer_&quot;</span>) &amp;&amp;  \</div><div class="line">        i.description.at(<span class="stringliteral">&quot;_raw_fn_pointer_&quot;</span>) == <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<span class="keyword">function</span>)) { \</div><div class="line">      i.description[<span class="stringliteral">&quot;documentation&quot;</span>] = docstring; \</div><div class="line">    } \</div><div class="line">  }</div></div><!-- fragment --><p>Sets a docstring on the function. If not provided, a default docstring describing the input arguments will be used. Must be called only <em>after</em> the function is registered. i.e. the matching REGISTER_FUNCTION must appear before, and it must be called with exactly the same function.</p>
<div class="fragment"><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a></div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(demo_add_one, <span class="stringliteral">&quot;in&quot;</span>);</div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gaf476a39341a191c739319ecca72919db">REGISTER_DOCSTRING</a>(demo_add_one, <span class="stringliteral">&quot;Adds one to an integer/float&quot;</span>)</div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gaf476a39341a191c739319ecca72919db">REGISTER_DOCSTRING</a>(demo_to_string, &quot;Converts an arbitrary value to a <span class="keywordtype">string</span>&quot;)</div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a></div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="toolkit__function__macros_8hpp_source.html#l00149">149</a> of file <a class="el" href="toolkit__function__macros_8hpp_source.html">toolkit_function_macros.hpp</a>.</p>

</div>
</div>
<a id="gafd6f96997a5f904c3d9aa9204417aaf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd6f96997a5f904c3d9aa9204417aaf0">&#9670;&nbsp;</a></span>REGISTER_FUNCTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REGISTER_FUNCTION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">function, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">specs.push_back(toolkit_function_wrapper_impl::make_spec_indirect(<span class="keyword">function</span>, #<span class="keyword">function</span>, \</div><div class="line">                                                                      ##__VA_ARGS__));</div></div><!-- fragment --><p>Registers a function to make it callable from Python. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a> </dd>
<dd>
<a class="el" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a></dd></dl>
<p>Registers a function with no arguments. </p><div class="fragment"><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(<span class="keyword">function</span>)</div></div><!-- fragment --><p>Registers a function with 3 input arguments. The first input argument shall be named "a", the second named "b" and the 3rd named "c" </p><div class="fragment"><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(<span class="keyword">function</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>)</div></div><!-- fragment --><p>Example:</p>
<div class="fragment"><div class="line">std::string demo_to_string(flexible_type in) {</div><div class="line">  <span class="keywordflow">return</span> std::string(in);</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a></div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(demo_to_string, <span class="stringliteral">&quot;in&quot;</span>);</div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a></div></div><!-- fragment --><p>Namespaces are permitted. For instance: </p><div class="fragment"><div class="line"><span class="keyword">namespace </span>example {</div><div class="line">std::string demo_to_string(flexible_type in) {</div><div class="line">  <span class="keywordflow">return</span> std::string(in);</div><div class="line">}</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a></div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(example::demo_to_string, <span class="stringliteral">&quot;in&quot;</span>);</div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a></div></div><!-- fragment --><p>Both will be published as "demo_to_string"; the namespacing is ignored.</p>
<p>The return value of the function will be returned to Python. The function can return void. If the function fails, it should throw an exception which will be forward back to Python as RuntimeError. </p>

<p class="definition">Definition at line <a class="el" href="toolkit__function__macros_8hpp_source.html#l00114">114</a> of file <a class="el" href="toolkit__function__macros_8hpp_source.html">toolkit_function_macros.hpp</a>.</p>

</div>
</div>
<a id="gafdaa7f30a7425a7b6a904efe782a0cb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafdaa7f30a7425a7b6a904efe782a0cb6">&#9670;&nbsp;</a></span>REGISTER_NAMED_FUNCTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REGISTER_NAMED_FUNCTION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">function, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">specs.push_back(toolkit_function_wrapper_impl::make_spec_indirect(<span class="keyword">function</span>, name, \</div><div class="line">                                                                      ##__VA_ARGS__));</div></div><!-- fragment --><p>Register a function, assigning it a different name than the name of the function.</p>
<div class="fragment"><div class="line">std::string demo_to_string(flexible_type in) {</div><div class="line">  <span class="keywordflow">return</span> std::string(in);</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a></div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafdaa7f30a7425a7b6a904efe782a0cb6">REGISTER_NAMED_FUNCTION</a>(<span class="stringliteral">&quot;module._demo_to_string&quot;</span>, demo_to_string, <span class="stringliteral">&quot;in&quot;</span>);</div><div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a></div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="toolkit__function__macros_8hpp_source.html#l00131">131</a> of file <a class="el" href="toolkit__function__macros_8hpp_source.html">toolkit_function_macros.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
